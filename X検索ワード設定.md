# シールトラッカー - X検索ワード設定ガイド

## 現在のX検索ワード設定

シールトラッカーは、以下の**5つの検索キーワード**を使用してX（旧Twitter）から最新のシール情報を取得しています。

### 検索キーワード一覧

1. **ボンボンドロップシール 入荷**
   - ボンボンドロップシールの入荷情報を検索
   - 店舗名、入荷日時、在庫状況などの情報を取得

2. **サンリオ シール 販売**
   - サンリオキャラクターズシールの販売情報を検索
   - 公式ストア、量販店、専門店などの情報を取得

3. **たまごっち シール**
   - たまごっち関連シールの情報を検索
   - 新商品、コラボ商品などの情報を取得

4. **ディズニー ボンボンドロップ**
   - ディズニーキャラクターのボンボンドロップシールを検索
   - レアアイテム、限定品などの情報を取得

5. **シール 入荷情報**
   - 一般的なシール入荷情報を広く検索
   - さまざまなブランド、キャラクターの情報を取得

## 検索の仕組み

### データ取得方法

1. **Yahoo!リアルタイム検索**を使用
   - リアルタイムのX投稿を検索
   - 最新の投稿から情報を取得

2. **Google検索**を補助的に使用
   - Yahoo!で取得できない情報を補完
   - より広範囲な検索結果を取得

### 情報フィルタリング

- 各キーワードで検索した結果を統合
- 重複した投稿URLは自動的に削除
- 投稿日時の新しい順に並べ替え

## 地域フィルタリング

### 全国共通情報

以下のキーワードを含む投稿は、地域設定に関係なく常に表示されます：

- 全店
- 全国
- 公式
- オンライン
- 通販
- ネット
- Amazon
- 楽天
- Yahoo
- メルカリ

**表示例：**
- 「ロフト全店で入荷！」
- 「サンリオ公式オンラインストア」
- 「Amazon予約開始」

### 地域限定情報

地域を選択すると、その地域に関連する投稿のみが表示されます：

| 地域選択 | 表示される投稿 |
|---------|---------------|
| 全国 | すべての投稿 |
| 北海道 | 北海道の店舗情報 |
| 東北 | 青森、岩手、宮城、秋田、山形、福島 |
| 関東 | 東京、神奈川、埼玉、千葉、茨城、栃木、群馬 |
| 中部 | 新潟、富山、石川、福井、山梨、長野、岐阜、静岡、愛知 |
| **近畿** | **大阪、京都、兵庫、滋賀、奈良、和歌山、三重** |
| 中国 | 鳥取、島根、岡山、広島、山口 |
| 四国 | 徳島、香川、愛媛、高知 |
| 九州・沖縄 | 福岡、佐賀、長崎、熊本、大分、宮崎、鹿児島、沖縄 |

**例（近畿を選択した場合）：**
- ✅ 「梅田ロフトで入荷！」→ 表示（大阪府）
- ✅ 「京都駅前で販売中」→ 表示（京都府）
- ✅ 「サンリオ公式オンライン」→ 表示（全国共通）
- ❌ 「新宿店で入荷」→ 非表示（東京都）

## 使い方

### 最新情報を取得する

1. **SNSタブ**を開く
2. 右上の **🔄（更新）ボタン**をタップ
3. 最新のX投稿が自動取得されます
4. 「○件の最新投稿を取得しました」と表示されます

### 現在地を設定する

1. **SNSタブ**を開く
2. 右上の **📍（現在地）ボタン**をタップ
3. 地域を選択（例：近畿）
4. 設定は**自動保存**され、次回も引き継がれます

### 投稿を見る

1. 投稿カードをタップ
2. 実際のX投稿ページへ移動
3. **戻るボタン**でアプリへ戻れます

## 技術仕様

### ファイル構成

```
lib/services/realtime_sns_service.dart
```

このファイルで検索ワードやデータ取得ロジックが管理されています。

### 検索ワードのカスタマイズ

検索キーワードは以下の場所で変更できます：

```dart
// lib/services/realtime_sns_service.dart
final keywords = [
  'ボンボンドロップシール 入荷',
  'サンリオ シール 販売',
  'たまごっち シール',
  'ディズニー ボンボンドロップ',
  'シール 入荷情報',
];
```

## よくある質問

### Q: 検索結果が少ない場合は？

A: 以下の対策があります：
- 更新ボタンで再取得
- 地域設定を「全国」に変更
- 時間を置いてから再試行

### Q: リアルタイム検索が失敗した場合は？

A: サンプルデータ（実際のX投稿URL）が自動的に表示されます。
すべて実在する投稿へのリンクなので、安心してご利用ください。

### Q: 地域設定はいつまで保存される？

A: アプリをアンインストールするまで永続的に保存されます。
他のページへ移動しても、設定はリセットされません。

## 更新履歴

- **2025-01-XX**: 初版作成
  - 5つの検索キーワード設定
  - 地域フィルタリング機能実装
  - 全国共通情報の自動判定機能追加

---

**開発者向けメモ：**
- 検索キーワードは必要に応じて追加・変更可能
- 地域キーワードも `LocationSettingsService` で管理
- 外部リンクは `LaunchMode.externalApplication` と `webOnlyWindowName: '_blank'` を使用
